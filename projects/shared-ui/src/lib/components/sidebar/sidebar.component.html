<!-- Layout wrapper -->
<div class="flex min-h-screen bg-ui-bg">
  <!-- Sidebar -->
  <aside class="w-64 bg-ui-bg border-r border-ui-stroke/40 flex flex-col">
    <!-- Profile -->
    <div class="m-default">
      <div class="flex items-center gap-image">
        <img
          src="/assets/emma.png"
          alt="profile pic"
          class="w-12 h-12 rounded-full"
        />

        @if (userInfo) {
          <div class="min-w-0">
            <div class="text-h3 font-medium text-ui-text truncate">
              {{ userInfo.name }}
            </div>
            <div class="text-p font-regular text-ui-text-muted truncate">
              {{ userInfo.role }}
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Divider -->
    <div class="mx-default border-b border-ui-stroke"></div>

    <!-- Navigation -->
    <nav class="flex-1 m-default overflow-y-auto">
      <div class="space-y-stack">
        @for (item of navigationItems; track item.route) {
          <a
            [routerLink]="item.route"
            (click)="setActiveItem(item.route)"
            class="w-full block text-left p-text text-p font-regular rounded-lg"
            [ngClass]="isActive(item.route)
              ? 'bg-ui-action text-ui-action-text cursor-default'
              : 'text-ui-text hover:bg-ui-hover-sidebar cursor-pointer'"
          >
            <span class="flex items-center gap-stack">
              @if (item.icon && iconMap[item.icon]) {
                <lucide-icon class="w-4 h-4" [img]="iconMap[item.icon]"></lucide-icon>
              }
              <span class="truncate">{{ item.label }}</span>
            </span>
          </a>
        }
      </div>
    </nav>

    <!-- Divider -->
    <div class="mx-default border-b border-ui-stroke"></div>

    <!-- Bottom Section -->
    <div class="m-default">
      <div class="space-y-stack">
        <!-- Notifications -->
        <button
          type="button"
          (click)="setActiveItem('notifications')"
          class="w-full text-left p-text text-p font-regular flex items-center gap-stack rounded-lg"
          [ngClass]="activeItem === 'notifications'
            ? 'bg-ui-action text-ui-action-text cursor-default'
            : 'text-ui-text hover:bg-ui-hover-sidebar cursor-pointer'"
        >
          <lucide-icon [img]="Bell" class="w-4 h-4"></lucide-icon>
          <span class="truncate">Notifications</span>
        </button>

        <!-- Settings -->
        <button
          type="button"
          (click)="setActiveItem('settings')"
          class="w-full text-left p-text text-p font-regular flex items-center gap-stack rounded-lg"
          [ngClass]="activeItem === 'settings'
            ? 'bg-ui-action text-ui-action-text cursor-default'
            : 'text-ui-text hover:bg-ui-hover-sidebar cursor-pointer'"
        >
          <lucide-icon [img]="Settings" class="w-4 h-4"></lucide-icon>
          <span class="truncate">Settings</span>
        </button>

        <!-- Help -->
        <button
          type="button"
          (click)="setActiveItem('help')"
          class="w-full text-left p-text text-p font-regular flex items-center gap-stack rounded-lg"
          [ngClass]="activeItem === 'help'
            ? 'bg-ui-action text-ui-action-text cursor-default'
            : 'text-ui-text hover:bg-ui-hover-sidebar cursor-pointer'"
        >
          <lucide-icon [img]="MessageCircleQuestionMark" class="w-4 h-4"></lucide-icon>
          <span class="truncate">Help / FAQ</span>
        </button>
      </div>

      <!-- Log out -->
      <button
        type="button"
        (click)="onLogout()"
        class="mt-stack w-full text-left p-text text-p font-regular flex items-center gap-stack rounded-lg text-ui-text hover:bg-ui-hover-sidebar"
      >
        <lucide-icon [img]="LogOut" class="w-4 h-4"></lucide-icon>
        <span class="truncate">Log out</span>
      </button>
    </div>
  </aside>

  <!-- Content Area -->
  <div class="flex-1 overflow-auto">
    <ng-content></ng-content>
  </div>

  <!-- Right Panel -->
  <lib-right-panel></lib-right-panel>
</div>